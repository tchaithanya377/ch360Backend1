{% extends 'dashboard/base.html' %}
{% block content %}
<div class="d-flex align-items-center justify-content-between mb-2">
  <h2 class="mb-0">Transcript - {{ student.roll_number }} ({{ student.full_name }})</h2>
  <span class="badge bg-primary">CGPA: {{ grad.cgpa|default:'N/A' }}</span>
</div>
<p class="text-muted">Total Credits Earned: <strong>{{ grad.total_credits_earned|default:0 }}</strong></p>

<h3>Per-Term GPA</h3>
<div class="table-responsive"><table class="table table-striped table-hover">
  <thead><tr><th>Term</th><th>GPA</th><th>Credits</th></tr></thead>
  <tbody>
    {% for g in term_gpas %}
      <tr>
        <td>{{ g.term.academic_year }} {{ g.term.get_semester_display }}</td>
        <td>{{ g.gpa|default:'-' }}</td>
        <td>{{ g.total_credits }}</td>
      </tr>
    {% empty %}
      <tr><td colspan="3">No GPA records.</td></tr>
    {% endfor %}
  </tbody>
</table></div>

<h3>Course Results</h3>
<div class="table-responsive"><table class="table table-striped table-hover">
  <thead>
    <tr><th>Term</th><th>Course</th><th>Internal</th><th>External</th><th>Total</th><th>Grade</th><th>Points</th></tr>
  </thead>
  <tbody>
    {% for r in results %}
      <tr>
        <td>{{ r.term.academic_year }} {{ r.term.get_semester_display }}</td>
        <td>{{ r.course_section.course.code }} - {{ r.course_section.course.title }}</td>
        <td>{{ r.internal_marks }}</td>
        <td>{{ r.external_marks }}</td>
        <td>{{ r.total_marks }}</td>
        <td>{{ r.letter_grade }}</td>
        <td>{{ r.grade_points }}</td>
      </tr>
    {% empty %}
      <tr><td colspan="7">No results.</td></tr>
    {% endfor %}
  </tbody>
</table></div>
{% endblock %}


