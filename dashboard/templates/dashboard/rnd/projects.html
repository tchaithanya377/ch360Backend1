{% extends 'dashboard/base.html' %}
{% block title %}R&D Projects{% endblock %}
{% block content %}
<div class="container-fluid">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>Projects</h3>
    <form class="d-flex" method="get">
      <input class="form-control me-2" type="search" placeholder="Search" name="search" value="{{ search }}">
      <select class="form-select me-2" name="status">
        <option value="">All Status</option>
        <option value="draft" {% if status_filter == 'draft' %}selected{% endif %}>Draft</option>
        <option value="active" {% if status_filter == 'active' %}selected{% endif %}>Active</option>
        <option value="paused" {% if status_filter == 'paused' %}selected{% endif %}>Paused</option>
        <option value="completed" {% if status_filter == 'completed' %}selected{% endif %}>Completed</option>
        <option value="cancelled" {% if status_filter == 'cancelled' %}selected{% endif %}>Cancelled</option>
      </select>
      <button class="btn btn-primary" type="submit">Filter</button>
    </form>
  </div>
  <div class="card p-3">
    <div class="table-responsive">
      <table class="table table-striped table-hover mb-0">
        <thead><tr><th>Title</th><th>PI</th><th>Members</th><th>Status</th><th>Start</th></tr></thead>
        <tbody>
          {% for p in projects %}
          <tr>
            <td><a href="{% url 'dashboard:rnd_project_detail' p.id %}">{{ p.title }}</a></td>
            <td>{{ p.principal_investigator }}</td>
            <td>{{ p.members.count }}</td>
            <td><span class="badge text-bg-secondary">{{ p.get_status_display }}</span></td>
            <td>{{ p.start_date|default:'-' }}</td>
          </tr>
          {% empty %}
          <tr><td colspan="5" class="text-center text-muted">No projects found</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}

