{% extends 'dashboard/base.html' %}
{% block content %}
<div class="container">
  <h2>Companies</h2>
  <form method="get" class="mb-3">
    <div class="input-group">
      <input type="text" class="form-control" name="search" placeholder="Search companies" value="{{ request.GET.search }}"/>
      <button class="btn btn-outline-secondary" type="submit">Search</button>
    </div>
  </form>

  <form method="post" class="mb-4">
    {% csrf_token %}
    <div class="row g-2">
      <div class="col-md-3"><input class="form-control" name="name" placeholder="Company name" required></div>
      <div class="col-md-3"><input class="form-control" name="website" placeholder="Website (https://)"></div>
      <div class="col-md-2"><input class="form-control" name="industry" placeholder="Industry"></div>
      <div class="col-md-2"><input class="form-control" name="headquarters" placeholder="Headquarters"></div>
      <div class="col-md-2"><input class="form-control" name="contact_email" placeholder="Contact email"></div>
      <div class="col-12"><textarea class="form-control" name="description" placeholder="Description"></textarea></div>
      <div class="col-12"><button class="btn btn-primary mt-2" type="submit">Add Company</button></div>
    </div>
  </form>

  <table class="table table-striped">
    <thead><tr><th>Name</th><th>Industry</th><th>Website</th><th>Contact</th><th>Created</th></tr></thead>
    <tbody>
      {% for c in companies %}
      <tr>
        <td>{{ c.name }}</td>
        <td>{{ c.industry }}</td>
        <td>{% if c.website %}<a href="{{ c.website }}" target="_blank">Link</a>{% endif %}</td>
        <td>{{ c.contact_email }} {{ c.contact_phone }}</td>
        <td>{{ c.created_at|date:'Y-m-d' }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="5" class="text-center">No companies yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}


